dnl ===================================================================

AT_COPYRIGHT([Copyright (C) 2008 Hans Ulrich Niedermann])
AT_TESTED([nbb])

dnl ===================================================================

dnl ===================================================================

AT_SETUP([nbb: --version option])
AT_KEYWORDS([nbb version])
AT_CHECK([nbb --version],
[0],
[nbb (ndims git utilities) AT_PACKAGE_VERSION
])
AT_CLEANUP()

dnl ===================================================================

AT_SETUP([nbb: --help option])
AT_KEYWORDS([nbb help])
AT_CHECK([nbb --help], [0], [ignore], [ignore])
AT_CLEANUP()

dnl ===================================================================

AT_SETUP([nbb: help command])
AT_KEYWORDS([nbb help])
AT_CHECK([nbb help], [0], [ignore], [])
AT_CLEANUP()

dnl ===================================================================

AT_SETUP([nbb: internal-config command])
AT_KEYWORDS([nbb internal-config])
AT_CHECK([nbb internal-config], [0], [ignore], [])
AT_CLEANUP()

dnl ===================================================================

AT_SETUP([nbb: git config default defaults])
AT_KEYWORDS([nbb git config])
AT_CHECK([mkdir test.git && cd test.git])
AT_CHECK([cd test.git && git init], [0],
[Initialized empty Git repository in .git/
])
echo "$PWD/test.git" > expout
AT_CHECK([cd test.git && nbb config srcdir], [0], [expout])
echo "$PWD/test.git/_build/_master" > expout
AT_CHECK([cd test.git && nbb config builddir], [0], [expout])
echo "$PWD/test.git/_install/master" > expout
AT_CHECK([cd test.git && nbb config installdir], [0], [expout])
AT_CHECK([rm -rf test.git])
AT_CLEANUP()

dnl ===================================================================

AT_SETUP([nbb: bzr config defaults])
AT_KEYWORDS([nbb bzr config])
AT_CHECK([mkdir test.bzr && cd test.bzr])
AT_CHECK([cd test.bzr && bzr init])
echo "$PWD/test.bzr" > expout
AT_CHECK([cd test.bzr && nbb config srcdir], [0], [expout])
echo "$PWD/test.bzr/_build" > expout
AT_CHECK([cd test.bzr && nbb config builddir], [0], [expout])
echo "$PWD/test.bzr/_install" > expout
AT_CHECK([cd test.bzr && nbb config installdir], [0], [expout])
AT_CHECK([rm -rf test.git])
AT_CLEANUP()

dnl ===================================================================

dnl ===================================================================
